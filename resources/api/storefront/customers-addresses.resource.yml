resource:
    name: CustomersAddresses
    shortName: customers-addresses
    description: 'Customer address management for authenticated customers - billing and shipping addresses'

    provider: Spryker\Glue\Customer\Api\Storefront\Provider\CustomersAddressesStorefrontProvider
    processor: Spryker\Glue\Customer\Api\Storefront\Processor\CustomersAddressesStorefrontProcessor

    paginationEnabled: false # Addresses are typically small collections per customer

    operations:
        - type: GetCollection
          description: 'Retrieve all addresses for the authenticated customer'
          uriTemplate: '/customers/{customerReference}/addresses'
          uriVariables:
              customerReference:
                  toProperty: 'customer'
                  fromClass: CustomersStorefrontResource

        - type: Get
          description: 'Retrieve a specific address by UUID'
          uriTemplate: '/customers/{customerReference}/addresses/{uuid}'
          uriVariables:
              customerReference:
                  toProperty: 'customer'
                  fromClass: CustomersStorefrontResource

              uuid:
                  fromClass: CustomersAddressesStorefrontResource

        - type: Post
          description: 'Create a new address for the authenticated customer'
          uriTemplate: '/customers/{customerReference}/addresses'
          uriVariables:
              customerReference:
                  toProperty: 'customer'
                  fromClass: CustomersStorefrontResource

        - type: Patch
          description: 'Update an existing address'
          uriTemplate: '/customers/{customerReference}/addresses/{uuid}'

        - type: Delete
          description: 'Delete an address (soft delete)'
          uriTemplate: '/customers/{customerReference}/addresses/{uuid}'

    includableIn:
        - resource: Customers
          relationshipName: addresses
          uriVariableMappings:
              customerReference: customerReference

    properties:
        uuid:
            type: string
            identifier: true
            writable: false
            readable: true
            required: false
            description: 'Unique identifier for the address (auto-generated)'
            openapiContext:
                example: 'customer_address--1--123'

        customerReference:
            type: string
            identifier: false
            writable: false
            readable: true
            required: false
            description: 'Reference to the customer who owns this address'
            openapiContext:
                example: 'DE--123'

        customer:
            type: CustomersStorefrontResource
            writable: false
            readable: true
            required: true
            description: 'The customer who owns this address'

        salutation:
            type: string
            writable: true
            readable: true
            required: true
            description: 'The salutation for the address recipient'
            openapiContext:
                example: 'Mr'
                enum: ['Mr', 'Mrs', 'Dr', 'Ms', 'n/a']

        firstName:
            type: string
            writable: true
            readable: true
            required: true
            description: 'First name for the address recipient'
            openapiContext:
                example: 'Thomas'

        lastName:
            type: string
            writable: true
            readable: true
            required: true
            description: 'Last name for the address recipient'
            openapiContext:
                example: 'Bell'

        address1:
            type: string
            writable: true
            readable: true
            required: true
            description: 'First line of the street address'
            openapiContext:
                example: 'Kieler Str. 75'

        address2:
            type: string
            writable: true
            readable: true
            required: true
            description: 'Second line of the street address'
            openapiContext:
                example: 'Building A'

        address3:
            type: string
            writable: true
            readable: true
            required: false
            description: 'Third line of the street address (optional)'
            openapiContext:
                example: 'Floor 3'

        company:
            type: string
            writable: true
            readable: true
            required: false
            description: 'Company name for business addresses'
            openapiContext:
                example: 'Spryker Systems GmbH'

        city:
            type: string
            writable: true
            readable: true
            required: true
            description: 'City name'
            openapiContext:
                example: 'Hamburg'

        zipCode:
            type: string
            writable: true
            readable: true
            required: true
            description: 'Postal/ZIP code'
            openapiContext:
                example: '20095'

        iso2Code:
            type: string
            writable: true
            readable: true
            required: true
            description: 'Two-letter ISO country code'
            openapiContext:
                example: 'DE'

        phone:
            type: string
            writable: true
            readable: true
            required: false
            description: 'Phone number for this address'
            openapiContext:
                example: '+49 40 12345678'

        comment:
            type: string
            writable: true
            readable: true
            required: false
            description: 'Additional delivery instructions or comments'
            openapiContext:
                example: 'Please ring the doorbell twice'

        isDefaultShipping:
            type: boolean
            writable: true
            readable: true
            required: false
            description: 'Flag indicating if this is the default shipping address'
            openapiContext:
                example: false

        isDefaultBilling:
            type: boolean
            writable: true
            readable: true
            required: false
            description: 'Flag indicating if this is the default billing address'
            openapiContext:
                example: false

        country:
            type: string
            writable: false
            readable: true
            required: false
            description: 'Country name (read-only, derived from iso2Code)'
            openapiContext:
                example: 'Germany'

        region:
            type: string
            writable: false
            readable: true
            required: false
            description: 'Region/state name (read-only)'
            openapiContext:
                example: 'Hamburg'

        createdAt:
            type: string
            writable: false
            readable: true
            required: false
            description: 'Timestamp when the address was created'
            openapiContext:
                example: '2025-01-15T10:00:00+00:00'

        updatedAt:
            type: string
            writable: false
            readable: true
            required: false
            description: 'Timestamp when the address was last updated'
            openapiContext:
                example: '2025-01-20T14:30:00+00:00'

        deletedAt:
            type: string
            writable: false
            readable: true
            required: false
            description: 'Timestamp when the address was soft-deleted (null if active)'
            openapiContext:
                example: null
